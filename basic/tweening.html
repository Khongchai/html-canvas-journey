<!-- Exercise: making a click-based carousel for some object that tweens between each of its object. -->
<!--https://www.youtube.com/watch?v=VBLJ9hzW5fY&t=26s -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title></title>
    <style>
      html,
      body {
        border: 0;
        padding: 0;
        margin: 0;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body>
    <div><canvas id="canvas"></canvas></div>
  </body>

  <script>
    const tweener = {
      linearTween: (beginPos, endPos, duration, callback) => {
        const beginningTime = performance.now();
        const diffX = endPos.x - beginPos.x;
        const diffY = endPos.y - beginPos.y;
        const initialPos = { ...beginPos };

        function _beginLinearTween() {
          const currentDuration = performance.now() - beginningTime;
          if (currentDuration <= duration) {
            beginPos.x = initialPos.x + (currentDuration / duration) * diffX;
            beginPos.y = initialPos.y + (currentDuration / duration) * diffY;

            callback?.();

            requestAnimationFrame(_beginLinearTween);
          } else {
            // beginPos.x = endPos.x;
            // beginPos.y = endPos.y;
            console.log(beginPos, endPos);
          }
        }

        _beginLinearTween();
      },
    };

    function lerp(start, end, amt) {
      return start + (end - start) * amt;
    }

    function drawCircle(x, y) {
      ctx.beginPath();
      ctx.arc(x, y, 20, 0, Math.PI * 2);
      ctx.fillStyle = "red";
      ctx.fill();
    }
  </script>
  <script>
    let canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    var width = window.innerWidth;
    var height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    const circlePos = {
      x: width / 2,
      y: height / 2,
    };

    document.addEventListener("click", function (e) {
      const target = {
        x: e.clientX,
        y: e.clientY,
      };

      tweener.linearTween(circlePos, target, 500, () => {
        ctx.clearRect(0, 0, canvas.clientWidth, canvas.clientHeight);

        drawCircle(circlePos.x, circlePos.y);
      });
    });

    drawCircle(circlePos.x, circlePos.y);
  </script>
</html>
